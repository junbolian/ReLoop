### SYSTEM PROMPT ###
You are an optimization modeling assistant specialized in retail supply chains.

Your task:
- Read a natural-language scenario description and a JSON data blob.
- Infer the correct mathematical optimization model (MILP) that matches the business logic.
- Implement that model as Python code using the Gurobi solver (gurobipy).
- Do NOT change the JSON data. Treat it as given inputs.

Requirements:
- Define all sets and parameters using the JSON fields.
- Define decision variables with clear, concise names.
- Add constraints that match the scenario description and the implied structure.
- Set an objective that minimizes total cost, including holding cost, lost-sales penalties,
  waste, ordering cost, and other costs implied by the JSON.
- At the end of the script, build the model, call the solver, and print the objective value
  and basic summaries of key decisions.

Return:
- A single Python script as plain text (no Markdown formatting, no code fences).

### USER PROMPT ###
[SCENARIO]
Family: F1 (Core Operations)
Archetype: retail_f1_base
Scenario ID: retail_f1_base_v3

Business narrative:
The retailer manages weekly inventory for several products across multiple distribution centers that directly serve final customer demand. Demand for each product at each location is seasonal and exogenous. Products are replenished each period up to a per-product production or procurement capacity, and any demand that is not served immediately in the period is permanently lost and penalized. Customers are never backlogged or promised future delivery. Inventory is held locally at each distribution center, and there is no movement of stock between locations in this archetype.

Structure cues:
- Time is a discrete sequence of periods defined in the JSON. Decisions about how much to produce or procure and how much to ship to each location are made at the beginning of each period; demand is realized and served within that same period.
- Inventory evolves by carrying over what remains from the previous period, adding any new production assigned to the location, and subtracting units that are sold or intentionally discarded as waste. On-hand stock is never allowed to become negative.
- Any demand that cannot be met from available local inventory in the period is treated as lost sales and incurs the lost sales penalty. There is no concept of backorders, reservations, or delayed fulfillment.
- Production for each product in each period cannot exceed the given production capacity. Production is available without delay in this archetype because lead times are effectively zero.
- Storage capacity at each location and period limits the total volume of on-hand inventory using product-specific storage usage coefficients and location capacities from the JSON. These limits must be respected even in periods where they do not bind.
- Customers may substitute from the basic product to the premium product along the one-way substitution relationship encoded in the JSON substitution graph; no other substitution paths are allowed.
- There is no transshipment of inventory between locations; each location can only serve its own local demand from its own inventory.
- Labor capacity is set high enough that it does not bind in this archetype, but if labor constraints are included they must be consistent with the JSON parameters.
- The objective is to minimize total cost over the horizon, including purchasing or production costs, inventory holding costs, waste costs, and lost sales penalties. No fixed ordering costs, minimum order quantities, lead times, reverse flows, or global budgets are active here.

Operational context:
- The JSON contains the number of time periods, the list of products, and the list of locations
  directly as top-level fields (for example: "periods", "products", "locations").
- Cost parameters such as holding, lost-sales, waste, purchasing, and any fixed ordering costs
  are stored in the "costs" section of the JSON.
- Capacity and operational limits such as storage capacity, production capacity, labor capacity,
  shelf life, lead times, minimum order quantities, pack sizes, and any waste or budget limits
  are stored in fields such as "cold_capacity", "production_cap", "labor_cap", "shelf_life",
  "lead_time", "constraints", and "network".
- Substitution and transshipment structures are encoded in the "network" section, for example
  as substitution edges or transshipment edges between locations.
- The model should respect all of these fields exactly as given and interpret them in a way
  consistent with the scenario description.

JSON data (do not modify):
The evaluation harness loads the JSON for this scenario into a Python variable
called `data`. Your code should read all sets and parameters from `data` using
these fields and must not change any numeric values.

[INSTRUCTION]
Using ONLY the information above, write a complete Python script that:

1) Imports gurobipy (import gurobipy as gp; from gurobipy import GRB),
2) Assumes the JSON has already been loaded into a Python variable called `data`,
3) Builds and solves a mixed-integer linear program that reflects the business
   description and the structure implied by the JSON fields (including capacities,
   shelf life, lead times, substitution edges, transshipment edges, and other flags),
4) Prints the solver status and the optimal objective value.

Do not invent extra data. Do not change any numbers from the JSON.
Return ONLY the Python source code as plain text, with no comments and no Markdown.