[SCENARIO]
Family: F3 (Shared Resources and Capacity)
Archetype: retail_f3_supply_bottleneck
Scenario ID: retail_f3_supply_bottleneck_v4

[BUSINESS DESCRIPTION]
Business narrative:
Storage space is abundant but upstream production capacity is tight. The main bottleneck is how many units can be produced or procured each period, not how many can be stored. Demand is still exogenous, local to each location, and there are no backorders or transshipment.

Structure cues:
- The inventory and lost sales logic is the same as in the base scenario.
- Shelf life: Each product has a shelf life in periods. Inventory must be tracked by REMAINING LIFE. Use I[p,l,t,r] where r = remaining periods until expiry (1..shelf_life[p]). Convention: r=1 is OLDEST (sell first under FIFO), r=shelf_life[p] is FRESHEST. Key equations: (1) Fresh inflow: I[p,l,t,SL] = Q[p,t] * demand_share[l] where Q is total production. (2) Aging: I[p,l,t+1,r] = I[p,l,t,r+1] - sales[p,l,t,r+1] for r=1..SL-1. (3) Waste: W[p,l,t] = I[p,l,t,1] - sales[p,l,t,1]. (4) Sales availability: sales[p,l,t,r] <= I[p,l,t,r].
- Storage capacity: sum over products of (cold_usage[p] * total_inventory[p,l,t]) <= cold_capacity[l]. Storage capacities in the JSON are set very high so that storage constraints are effectively non-binding.
- Per-product production capacities are significantly reduced. These caps must be enforced and become the main source of unmet demand.
- Inventory at each location and period stays non-negative and changes according to local production, sales, and waste.
- There is no transshipment, lead times are zero, and substitution behavior is determined by the substitution graph with standard semantics.
- The objective is to minimize total cost, with lost sales penalties playing a central role because of tight production capacity.
